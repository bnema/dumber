// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: zoom.sql

package sqlc

import (
	"context"
)

const DeleteZoomLevel = `-- name: DeleteZoomLevel :exec
DELETE FROM zoom_levels WHERE domain = ?
`

func (q *Queries) DeleteZoomLevel(ctx context.Context, domain string) error {
	_, err := q.db.ExecContext(ctx, DeleteZoomLevel, domain)
	return err
}

const GetZoomLevel = `-- name: GetZoomLevel :one
SELECT domain, zoom_factor, updated_at FROM zoom_levels WHERE domain = ? LIMIT 1
`

func (q *Queries) GetZoomLevel(ctx context.Context, domain string) (ZoomLevel, error) {
	row := q.db.QueryRowContext(ctx, GetZoomLevel, domain)
	var i ZoomLevel
	err := row.Scan(&i.Domain, &i.ZoomFactor, &i.UpdatedAt)
	return i, err
}

const ListZoomLevels = `-- name: ListZoomLevels :many
SELECT domain, zoom_factor, updated_at FROM zoom_levels ORDER BY updated_at DESC
`

func (q *Queries) ListZoomLevels(ctx context.Context) ([]ZoomLevel, error) {
	rows, err := q.db.QueryContext(ctx, ListZoomLevels)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []ZoomLevel{}
	for rows.Next() {
		var i ZoomLevel
		if err := rows.Scan(&i.Domain, &i.ZoomFactor, &i.UpdatedAt); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const SetZoomLevel = `-- name: SetZoomLevel :exec
INSERT INTO zoom_levels (domain, zoom_factor, updated_at)
VALUES (?, ?, CURRENT_TIMESTAMP)
ON CONFLICT(domain) DO UPDATE SET
    zoom_factor = excluded.zoom_factor,
    updated_at = CURRENT_TIMESTAMP
`

type SetZoomLevelParams struct {
	Domain     string  `json:"domain"`
	ZoomFactor float64 `json:"zoom_factor"`
}

func (q *Queries) SetZoomLevel(ctx context.Context, arg SetZoomLevelParams) error {
	_, err := q.db.ExecContext(ctx, SetZoomLevel, arg.Domain, arg.ZoomFactor)
	return err
}
